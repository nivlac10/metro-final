{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/validators/email.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LoginPage } from './login';\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tLoginPage\r\n\t],\r\n\timports: [\r\n\t\tIonicPageModule.forChild(LoginPage)\r\n\t],\r\n\tentryComponents: [\r\n\t\tLoginPage\r\n\t]\r\n})\r\nexport class LoginPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { FormControl } from '@angular/forms';\n\nexport class EmailValidator {\n  \n  static isValid(control: FormControl){\n    const re = /^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$/.test(control.value);\n    \n    if (re){\n      return null;\n    }\n    \n    return {\n      \"invalidEmail\": true\n    };\n    \n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/email.ts","import { Component } from '@angular/core';\nimport {\n  Loading,\n  Platform,\n  LoadingController, \n  NavController,\n  AlertController, MenuController } from 'ionic-angular';\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { EmailValidator } from '../../validators/email';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { IonicPage } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile';\n//import { Diagnostic } from '@ionic-native/diagnostic';\nimport { SettingsProvider } from '../../providers/settings/settings';\nimport { LanguageProvider } from '../../providers/language/language';\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  public loginForm: FormGroup;\n  loading: Loading;\n  public initState: boolean =  false;\n\n  constructor(public navCtrl: NavController, public lp: LanguageProvider, public settings: SettingsProvider,  public platform: Platform, public menu: MenuController, public loadingCtrl: LoadingController, \n    public alertCtrl: AlertController, public authProvider: AuthProvider, public ph: ProfileProvider,\n    public formBuilder: FormBuilder) {\n      menu.swipeEnable(false, 'menu1');\n      this.loginForm = formBuilder.group({\n        email: ['', Validators.compose([Validators.required, EmailValidator.isValid])],\n        password: ['', Validators.compose([Validators.minLength(6), Validators.required])]\n      });\n\n      if (this.initState){\n        this.platform.registerBackButtonAction(()=>this.platform.exitApp());\n        }else{\n        this.platform.registerBackButtonAction(()=>{\n          this.initState = false;\n        });\n        }\n\n  }\n\n  ionViewDidLoad(){\n  //this.checkForGPS()\n  this.presentRouteLoader('')\n }\n\n  loginUser(): void {\n    if (!this.loginForm.valid){\n      console.log(this.loginForm.value);\n    } else {\n      this.authProvider.loginUser(this.loginForm.value.email, this.loginForm.value.password)\n      .then( authData => {\n        this.loading.dismiss().then( () => {\n          this.ph.getUserProfile().on('value', userProfileSnapshot => {\n             let phone = userProfileSnapshot.val().phoneNumber;\n             if (phone == null){\n              this.navCtrl.setRoot('MoreInfoPage');\n             }else{\n              this.navCtrl.setRoot('HomePage');\n             }\n\n            })\n            \n        });\n      }, error => {\n        this.loading.dismiss().then( () => {\n          let alert = this.alertCtrl.create({\n            message: error.message,\n            buttons: [\n              {\n                text: this.lp.translate()[0].i8,\n                role: 'cancel'\n              }\n            ]\n          });\n          alert.present();\n        });\n      });\n      \n      this.loading = this.loadingCtrl.create();\n      this.loading.present();\n    }\n  }\n\n\n  goToSignup(): void {\n    this.navCtrl.setRoot('SplashPage');\n  }\n\n  goToResetPassword(): void {\n    this.navCtrl.setRoot('ResetPasswordPage');\n  }\n\n\n  showLogin(){\n    this.initState = true\n    this.presentRouteLoader('')\n  }\n\n  \npresentRouteLoader(message) {\n  let loading = this.loadingCtrl.create({\n    content: message\n  });\n\n  loading.present();\n\n  let myTimeout = setTimeout(() => {\n    loading.dismiss();\n    clearTimeout(myTimeout)\n    \n  }, 600);\n}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}