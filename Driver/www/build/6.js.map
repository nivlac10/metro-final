{"version":3,"sources":["../../src/pages/support/support.module.ts","../../src/pages/support/support.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SupportPage } from './support';\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tSupportPage\r\n\t],\r\n\timports: [\r\n\t\tIonicPageModule.forChild(SupportPage)\r\n\t],\r\n\tentryComponents: [\r\n\t\tSupportPage\r\n\t]\r\n})\r\nexport class SupportPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/support/support.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ViewController, AlertController, NavParams } from 'ionic-angular';\nimport { LanguageProvider } from '../../providers/language/language';\nimport { EventProvider } from '../../providers/event/event';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { CallNumber } from '@ionic-native/call-number';\nimport { SettingsProvider } from '../../providers/settings/settings';\nimport { HTTP } from '@ionic-native/http';\nimport { PopUpProvider } from '../../providers/pop-up/pop-up';\nimport {Headers} from '@angular/http';\n/**\n * Generated class for the ChatPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-support',\n  templateUrl: 'support.html',\n})\nexport class SupportPage {\n  id: any;\n  cartransmission: any = 'car is beign hijacked.';\n  public eventList: Array<any>;\n  constructor(public navCtrl: NavController, public pop: PopUpProvider, public http:HTTP, public call: CallNumber, public settings: SettingsProvider, public viewCtrl: ViewController, public alert: AlertController, public eventProvider: EventProvider, public ph: ProfileProvider, public lp: LanguageProvider, public navParams: NavParams) {\n     this.id = this.navParams.get('id')\n  }\n\n  ionViewDidEnter() {\n    console.log('inregf')\n    this.eventProvider.getSupportChatList(this.eventProvider.id).on('value', snapshot => {\n      this.eventList = [];\n      console.log('sjiy')\n      snapshot.forEach( snap => {\n        this.eventList.push({\n          id: snap.key,\n          admin: snap.val().Admin_Message,\n          user: snap.val().Client_Message,\n        });\n        console.log(this.eventList)\n        return false\n      });\n    });\n  }\n\n\n  closeChat(){\n    this.viewCtrl.dismiss();\n  }\n\n  callNow(){\n    window.open(\"tel:\" + this.settings.companyPhone);\n    //  this.call.callNumber(this.settings.companyPhone, true)\n     this.send('Driver Needs Support SOS code: ' + this.cartransmission, 'Trace the driver information to the admin', this.ph.user.email)\n   }\n\n  \n\n  Send() {\n    let alert = this.alert.create({\n      title: 'message',\n      inputs: [\n        {\n          name: 'Message',\n          placeholder: 'Reply'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: data => {    \n          }\n        },\n        {\n          text: 'Send',\n          handler: data => {\n            console.log(this.ph.user.email)\n            this.send('Support Message from Driver with ID ' + this.ph.user.uid, data.Message, this.ph.user.email)\n            this.eventProvider.Complain(data.Message, this.eventProvider.id)\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n\n\n  send(subject: string, message: string, email: string) {\n    \n    var url = \"https://api.mailgun.net/v3/\" + this.settings.mailGUrl + \"/messages\";\n    let body = {\n      \"from\": email,\n      \"to\": this.settings.companyMail,\n      \"subject\": subject,\n      \"html\": \"<html><body>First Name: \" + this.settings.appName + \"<br>\" + \"Last Name: \" + this.settings.appLink + \"<br>\" + \"Email: \" + email + \"<br>\" + \"Subject: \" + subject + \"<br><br>\" + \"Message: \" + message + \"</body></html>\"\n    }\n    let headers = {\n      \"Authorization\": \"Basic \" + this.settings.mailGKey,\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    };\n\n    //this.pop.showLoader('')\n   \n    this.http.post(url, body, headers).then(data => {\n     \n      console.log(\"SUCCESS -> \" + JSON.stringify(data));\n      \n    }).catch(error=> {\n      this.pop.showPimp(JSON.stringify(error))\n    })\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/support/support.ts"],"sourceRoot":""}