{"version":3,"sources":["../../src/pages/estimate/estimate.module.ts","../../src/pages/estimate/estimate.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACN;AAU1C,IAAa,kBAAkB;IAA/B;IAAiC,CAAC;IAAD,yBAAC;AAAD,CAAC;AAArB,kBAAkB;IAR9B,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,+DAAY;SACb;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,+DAAY,CAAC;SACvC;KACF,CAAC;GACW,kBAAkB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZW;AACmF;AACjE;AACM;AACJ;AACX;AACkB;AACkC;AACV;AACpD;AAC4B;AAErE;;;;;GAKG;AAOH,IAAa,YAAY;IAoBvB,sBAAmB,OAAsB,EAAS,EAAoB,EAAS,SAAoB,EAAS,SAA0B,EAAS,QAAkB,EAAS,EAAmB,EAAS,SAAmC,EAAS,IAAgC,EAAS,KAAuB,EAAS,GAAc,EAAU,GAAkB,EAAS,aAA4B,EAAU,SAA0B;QAA9a,iBA6BC;QA7BkB,YAAO,GAAP,OAAO,CAAe;QAAS,OAAE,GAAF,EAAE,CAAkB;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,cAAS,GAAT,SAAS,CAAiB;QAAS,aAAQ,GAAR,QAAQ,CAAU;QAAS,OAAE,GAAF,EAAE,CAAiB;QAAS,cAAS,GAAT,SAAS,CAA0B;QAAS,SAAI,GAAJ,IAAI,CAA4B;QAAS,UAAK,GAAL,KAAK,CAAkB;QAAS,QAAG,GAAH,GAAG,CAAW;QAAU,QAAG,GAAH,GAAG,CAAe;QAAS,kBAAa,GAAb,aAAa,CAAe;QAAU,cAAS,GAAT,SAAS,CAAiB;QARva,cAAS,GAAY,KAAK,CAAC;QAC3B,aAAQ,GAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QAMxC,YAAO,GAAS,IAAI,MAAM,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAG1D,mCAAmC;QACnC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC;QACxD,gDAAgD;QAC/C,IAAI,MAAM,GAAG,EAAC,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC;QACpE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAC,UAAU,EAAE,MAAM,EAAC,EAAE,UAAC,OAAO,EAAE,MAAM;YAC1D,EAAE,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC;gBAClB,+EAA+E;gBAC/E,KAAI,CAAC,YAAY,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC;gBAClD,yBAAyB;gBACzB,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,YAAY,CAAC;YACnC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,iCAAiC;YAClC,CAAC;QAGP,CAAC,CAAC;QACJ,IAAI;QACR,+CAA+C;QAC/C,IAAI,CAAC,EAAE,CAAC,kBAAkB,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,6BAAmB;YAC1D,IAAI,KAAK,GAAG,mBAAmB,CAAC,GAAG,EAAE,CAAC;YACtC,KAAI,CAAC,SAAS,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC;YAClC,KAAI,CAAC,SAAS,CAAC,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC;YACxC,wBAAwB;QACzB,CAAC,CAAC;IAEH,CAAC;IAGD,gCAAS,GAAT;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,EAAC;YAC5C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpF,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,0CAA0C,CAAC;QAC/D,CAAC;IAEX,CAAC;IAID,wCAAiB,GAAjB,UAAkB,KAAK,EAAE,IAAI,EAAE,eAAe,EAAE,YAAY;QAA5D,iBA+BG;QA9BD,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,gBAAgB,CAAC;QACxC,gBAAgB;QAChB,8DAA8D;QAC9D,2BAA2B;QAC3B,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAC5B;YACE,OAAO,EAAE,CAAC,KAAK,EAAE,YAAY,CAAC;YAC9B,YAAY,EAAE,CAAC,eAAe,EAAE,IAAI,CAAC;YACrC,UAAU,EAAE,SAAS;YACrB,UAAU,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM;YACzC,aAAa,EAAE,KAAK;YACpB,UAAU,EAAE,KAAK;SAClB,EAAE,UAAC,QAAQ,EAAE,MAAM;YAClB,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,EAAC;gBAClB,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,GAAC,EAAE,CAAC,GAAG,GAAG;gBAC/E,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,GAAC,IAAI,CAAC,GAAG,KAAI,CAAC,SAAS,CAAC,UAAU,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI,GAAG,QAAQ,CAAC;gBACtI,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,SAAS,CAAC,UAAU,EAAE,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBAC1D,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,SAAS,GAAG,KAAK,CAAC;gBACpD,KAAI,CAAC,GAAG,CAAC,UAAU,EAAE;gBACnB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;YACnB,CAAC;QAKL,CAAC,CAAC;IAKJ,CAAC;IASL,uCAAgB,GAAhB,UAAkB,WAAW;QAA7B,iBAkCC;QAjCC,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;QACtD,KAAK,CAAC,YAAY,CAAC,cAAI;YACrB,iEAAiE;YACjE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;YACnB,EAAE,CAAC,CAAC,WAAW,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,CAAC,EAAC;gBACpC,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;gBACrD,KAAI,CAAC,QAAQ,GAAG,IAAI;gBACpB,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAE,EAAE,SAAS,EAAE,IAAI,EAAC,EAAE,UAAC,OAAO,EAAE,MAAM;oBAC/D,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;wBACnB,IAAI,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ;wBAC3C,KAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC;wBACrE,KAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE;wBACzB,KAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE;oBAC3B,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;YACA,uEAAuE;YACxE,EAAE,CAAC,CAAC,WAAW,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,CAAC,EAAC;gBACpC,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;gBACpD,KAAI,CAAC,WAAW,GAAG,IAAI;gBACvB,iGAAiG;gBACjG,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAE,EAAE,SAAS,EAAE,IAAI,EAAC,EAAE,UAAC,OAAO,EAAE,MAAM;oBAC/D,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;wBACnB,IAAI,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ;wBAC3C,KAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC;wBACtE,oBAAoB;wBACpB,KAAI,CAAC,SAAS,EAAE;oBACjB,CAAC;gBACH,CAAC,CAAC,CAAC;YAEL,CAAC;QACD,CAAC,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAKD,mBAAC;AAAD,CAAC;AA9IY,YAAY;IALxB,wEAAS,EAAE;IACX,wEAAS,CAAC;QACT,QAAQ,EAAE,eAAe;OACG;KAC7B,CAAC;iBAqB8a;AA0H/a;SA9IY,YAAY,e","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EstimatePage } from './estimate';\n\n@NgModule({\n  declarations: [\n    EstimatePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EstimatePage),\n  ],\n})\nexport class EstimatePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/estimate/estimate.module.ts","import { Component } from '@angular/core';\nimport { NavController, AlertController, IonicPage, ModalController, ActionSheetController, NavParams } from 'ionic-angular';\nimport { EventProvider } from '../../providers/event/event';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { PopUpProvider } from '../../providers/pop-up/pop-up';\nimport { OneSignal} from '@ionic-native/onesignal';\nimport { GeocoderProvider } from '../../providers/geocoder/geocoder';\nimport { NativeMapContainerProvider } from '../../providers/native-map-container/native-map-container';\nimport { DirectionserviceProvider } from '../../providers/directionservice/directionservice';\nimport { Platform } from 'ionic-angular';\nimport { LanguageProvider } from '../../providers/language/language';\ndeclare var google;\n/**\n * Generated class for the BooklaterPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-estimate',\n  templateUrl: 'estimate.html',\n})\nexport class EstimatePage {\n  public eventList: Array<any>;\n  public location: any;\n  public username: any;\n  public destination: any;\n  public userPos: any;\n  public userDes: any;\n  public lat: any;\n  public currentYear: any;\n  public lng: any;\n  public dataTime: any;\n  public scheduleInfo: any;\n  public hasBooked: boolean = false;\n  public geocoder: any = new google.maps.Geocoder;\n  public locationName: any;\n  userID: any;\n  id: any;\n  currentMonth: any;\n  currentDay: any;\n  public  service : any = new google.maps.DistanceMatrixService();\n  constructor(public navCtrl: NavController, public lp: LanguageProvider, public navParams: NavParams, public alertCtrl: AlertController, public platform: Platform, public ph: ProfileProvider, public dProvider: DirectionserviceProvider, public cMap: NativeMapContainerProvider, public gCode: GeocoderProvider, public One: OneSignal,  public pop: PopUpProvider, public eventProvider: EventProvider, private modalCtrl: ModalController) {\n   \n        //this.pop.showPimp(this.cMap.lat);\n        this.lat = this.navParams.get('lat');\n        this.lng = this.navParams.get('lng');\n        this.userPos = new google.maps.LatLng(this.lat, this.lng)\n         // this.pop.presentLoader('Getting location...')\n          let latlng = {lat: parseFloat(this.lat), lng: parseFloat(this.lng)};\n          this.geocoder.geocode({'location': latlng}, (results, status) => {\n            if (status === 'OK') {\n                //document.getElementById(\"position\").innerText = results[0].formatted_address;\n                this.locationName = results[0].formatted_address;\n               //  this.pop.hideLoader()\n               this.location = this.locationName;\n              } else {\n               // this.pop.showPimp(results[0]);\n              }\n        \n          \n        })\n      // }\n  // this.pop.presentLoader('Retrieving all...');\n  this.ph.getWebAdminProfile().on('value', userProfileSnapshot => {\n    let admin = userProfileSnapshot.val();\n    this.dProvider.fare = admin.price;\n    this.dProvider.pricePerKm = admin.perkm;\n    // this.pop.hideLoader()\n   })\n\n  }\n\n\n  Calculate(){\n      if (this.userPos != null && this.userDes != null){\n            this.calcScheduleRoute(this.userPos, this.userDes, this.destination, this.location);\n            }else{\n              this.pop.showPimp('Please Add your Destination and Location')\n            }\n \n  }\n\n\n\n  calcScheduleRoute(start, stop, destinationName, locationName) {\n    this.pop.presentLoader('Processing....')\n    // let kush = []\n    // kush.push(start, stop, destinationName, locationName, date)\n    // this.pop.showPimp(kush) \n    this.service.getDistanceMatrix(\n      {\n        origins: [start, locationName],\n        destinations: [destinationName, stop],\n        travelMode: 'DRIVING',\n        unitSystem: google.maps.UnitSystem.METRIC,\n        avoidHighways: false,\n        avoidTolls: false, \n      }, (response, status) => {\n        if (status == 'OK'){\n          let fareTime = Math.floor(response.rows[0].elements[1].duration.value/60) * 5.5\n          let price = Math.floor(response.rows[0].elements[1].distance.value/1000) * this.dProvider.pricePerKm + this.dProvider.fare + fareTime;\n          console.log(this.dProvider.pricePerKm ,this.dProvider.fare)\n           document.getElementById(\"cash\").innerText = price;\n         this.pop.hideLoader()\n           console.log(price)\n          }\n\n\n        \n      \n      })\n\n    \n    \n\n    }\n\n  \n\n\n\n\n\n\nshowAddressModal (selectedBar) {\n  let modal = this.modalCtrl.create('AutocompletePage');\n  modal.onDidDismiss(data => {\n    //Open the address modal on location bar click to change location\n    console.log(data)\n  if (selectedBar == 1 && data != null){\n    document.getElementById(\"position\").innerText = data;\n    this.location = data\n    this.gCode.geocoder.geocode( { 'address': data}, (results, status) => {\n      if (status == 'OK') {\n        var position = results[0].geometry.location\n        this.userPos = new google.maps.LatLng(position.lat(), position.lng())\n        this.lat = position.lat()\n        this.lng = position.lng()\n      }\n    });\n  }\n   //Open the address modal on destination bar click to change destination\n  if (selectedBar == 2 && data != null){\n    document.getElementById(\"whereto\").innerText = data;\n    this.destination = data\n    ///After data input, check to see if user selected to add a destination or to calculate distance.\n    this.gCode.geocoder.geocode( { 'address': data}, (results, status) => {\n      if (status == 'OK') {\n        var position = results[0].geometry.location\n        this.userDes = new google.maps.LatLng(position.lat(), position.lng())\n       // let date = 'fhdg'\n       this.Calculate()\n      }\n    });\n    \n  }\n  });\n  modal.present();\n}\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/estimate/estimate.ts"],"sourceRoot":""}