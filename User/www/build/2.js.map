{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/validators/email.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LoginPage } from './login';\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tLoginPage\r\n\t],\r\n\timports: [\r\n\t\tIonicPageModule.forChild(LoginPage),\r\n\t],\r\n\tentryComponents: [\r\n\t\tLoginPage\r\n\t]\r\n})\r\nexport class LoginPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { FormControl } from '@angular/forms';\n\nexport class EmailValidator {\n  \n  static isValid(control: FormControl){\n    const re = /^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$/.test(control.value);\n    \n    if (re){\n      return null;\n    }\n    \n    return {\n      \"invalidEmail\": true\n    };\n    \n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/email.ts","import { Component } from '@angular/core';\nimport {\n  Loading,\n  Platform,\n  LoadingController, \n  NavController,\n  AlertController, MenuController } from 'ionic-angular';\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { EmailValidator } from '../../validators/email';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { IonicPage } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { NativeMapContainerProvider } from '../../providers/native-map-container/native-map-container';\nimport { SettingsProvider } from '../../providers/settings/settings';\nimport { LanguageProvider } from '../../providers/language/language';\n// import { Diagnostic } from '@ionic-native/diagnostic';\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  public loginForm: FormGroup;\n  loading: Loading;\n  public initState: boolean =  false;\n\n  constructor(public navCtrl: NavController, public lp: LanguageProvider, public settings: SettingsProvider, public ntP: NativeMapContainerProvider,  public platform: Platform, public menu: MenuController, public loadingCtrl: LoadingController, \n    public alertCtrl: AlertController, public authProvider: AuthProvider, public ph: ProfileProvider,\n    public formBuilder: FormBuilder) {\n      menu.swipeEnable(false, 'menu1');\n      this.loginForm = formBuilder.group({\n        email: ['', Validators.compose([Validators.required, EmailValidator.isValid])],\n        password: ['', Validators.compose([Validators.minLength(6), Validators.required])]\n      });\n      if (this.initState){\n      this.platform.registerBackButtonAction(()=>this.platform.exitApp());\n      }else{\n      this.platform.registerBackButtonAction(()=>{\n        this.initState = false;\n      });\n      }\n \n  }\n\n\n  checkForGPS(){\n   //this.ntP.checkGps();\n  }\n\n  loginUser(): void {\n    if (!this.loginForm.valid){\n      console.log(this.loginForm.value);\n    } else {\n      this.authProvider.loginUser(this.loginForm.value.email, this.loginForm.value.password)\n      .then( authData => {\n        this.loading.dismiss().then( () => {\n          this.ph.getUserProfile().on('value', userProfileSnapshot => {\n            let phone = userProfileSnapshot.val().phoneNumber\n              if (phone == null)\n              this.navCtrl.setRoot('AccountkitPage');\n              else\n              this.navCtrl.setRoot('HomePage');\n          })\n        });\n      }, error => {\n        this.loading.dismiss().then( () => {\n          let alert = this.alertCtrl.create({\n            message: error.message,\n            buttons: [\n              {\n                text: this.lp.translate()[0].accept,\n                role: 'cancel'\n              }\n            ]\n          });\n          alert.present();\n        });\n      });\n      \n      this.loading = this.loadingCtrl.create();\n      this.loading.present();\n    }\n  }\n\n\n  // loginViaFacebook(){\n  //   this.authProvider.signInWithFacebook()\n  //   .then( authData => {\n  //     console.log(authData);\n  //     this.loading.dismiss().then( () => {\n  //           this.navCtrl.setRoot('StartupPage');\n  //     });\n    \n  //   }, error => {\n  //     this.loading.dismiss().then( () => {\n  //       let alert = this.alertCtrl.create({\n  //         message: error.message,\n  //         buttons: [\n  //           {\n  //             text: this.lp.translate()[0].accept,\n  //             role: 'cancel'\n  //           }\n  //         ]\n  //       });\n  //       alert.present();\n  //     });\n  //   });\n    \n  //   this.loading = this.loadingCtrl.create(\n  //     {content: ''}\n  //   );\n  //   this.loading.present();\n  \n  // }\n\n  goToSignup(): void {\n    this.navCtrl.push('EntrancePage');\n  }\n\n  goToResetPassword(): void {\n    this.navCtrl.push('ResetPasswordPage');\n  }\n\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}